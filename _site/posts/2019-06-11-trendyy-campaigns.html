<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.489">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Josiah Parry">
<meta name="dcterms.date" content="2019-06-11">

<title>Josiah Parry - Google Trends for Campaigns</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-8NVVBLZBVF"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-8NVVBLZBVF', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
<meta name="twitter:title" content="Josiah Parry - Google Trends for Campaigns">
<meta name="twitter:description" content="">
<meta name="twitter:creator" content="@josiahparry">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      Josiah Parry
      </li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Josiah Parry</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">about</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">posts</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">projects</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.xml" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RSS</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#google-trends-data" id="toc-google-trends-data" class="nav-link active" data-scroll-target="#google-trends-data">Google Trends Data</a>
  <ul class="collapse">
  <li><a href="#relative-popularity" id="toc-relative-popularity" class="nav-link" data-scroll-target="#relative-popularity">Relative Popularity</a></li>
  <li><a href="#related-queries" id="toc-related-queries" class="nav-link" data-scroll-target="#related-queries">Related Queries</a></li>
  </ul></li>
  <li><a href="#trendyy" id="toc-trendyy" class="nav-link" data-scroll-target="#trendyy"><code>trendyy</code></a></li>
  <li><a href="#visualizing-trends" id="toc-visualizing-trends" class="nav-link" data-scroll-target="#visualizing-trends">Visualizing Trends</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Google Trends for Campaigns</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Josiah Parry </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 11, 2019</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Over the past few years we have seen Google Trends becoming quite ubiquitous in politics. Pundits have used Google seach trends as talking points. It is not uncommon to hear news about a candidates search trends the days following a town hall or significant rally. It seems that Google trends are becoming the go to proxy for a candidate’s salience.</p>
<p>As a campaign, you are interested in the popularity of a candidate <em>relative</em> to another one. If candidate A has seen a gain from 50 to 70, that is all well and good. But how does that compare with candidates C and D? There are others potential use cases—that may be less fraught with media interruptions. For example, one can keep track of the popularity of possible policy issues—i.e.&nbsp;healthcare, gun safety, women’s rights.</p>
<p>Though the usefulness of Google Trends search popularity is still unclear, it may be something that your campaign might like to track. In this chapter we will explore how to acquire and utilize trend data using R. This chapter will describe how one can utilize Google Trends data to compare candidate search popularity and view related search terms. This will be done with the tidyverse, and the package <code>trendyy</code> for accessing this data.</p>
<section id="google-trends-data" class="level2">
<h2 class="anchored" data-anchor-id="google-trends-data">Google Trends Data</h2>
<section id="relative-popularity" class="level3">
<h3 class="anchored" data-anchor-id="relative-popularity">Relative Popularity</h3>
<p>The key metric that Google Trends provides is the <em>relative</em> popularity of a search term by a given geography. Relative search popularity is scaled from 0 to 100. This number is scaled based on population and geography size (for more information go <a href="https://support.google.com/trends/answer/4365533?hl=en">here</a>). This number may be useful on it’s own, but the strength of Google Trends is it’s ability to compare multiple terms. Using Google Trends we can compare up to 5 search terms—presumably candidates.</p>
</section>
<section id="related-queries" class="level3">
<h3 class="anchored" data-anchor-id="related-queries">Related Queries</h3>
<p>In addition to popularity, Google Trends provides you with related queries. This can help your media team understand in what context their candidate is being associated online.</p>
</section>
</section>
<section id="trendyy" class="level2">
<h2 class="anchored" data-anchor-id="trendyy"><code>trendyy</code></h2>
<p>Now that we have an intuition of how Google Trends may be utilized, we will look at how actually acquire these data in R. To get started install the package using <code>install.packages("trendyy")</code>.</p>
<p>Once the package is installed, load the <code>tidyverse</code> and <code>trendyy</code>.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="kr"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="o">(</span><span class="nv"><a href="https://github.com/josiahparry/trendyy">trendyy</a></span><span class="o">)</span>
<span class="kr"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="o">(</span><span class="nv"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="o">)</span></code></pre>
</div>
<p>In this example we will look at the top five polling candidates as of today (6/10/2019). These are, in no particular order, Joe Biden, Kamala Harris, Beto O’Rourke, Bernie Sanders, and Elizabeth Warren. Create a vector with the search terms that you will use (in this case the above candidates).</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">candidates</span> <span class="o">&lt;-</span> <span class="nf"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="o">(</span><span class="s">"Joe Biden"</span>, <span class="s">"Kamala Harris"</span>, <span class="s">"Beto O'Rourke"</span>, <span class="s">"Bernie Sanders"</span>, <span class="s">"Elizabeth Warren"</span><span class="o">)</span></code></pre>
</div>
<p>Next we will use the <code>trendyy</code> package to get search popularity. The function <a href="https://rdrr.io/pkg/trendyy/man/trendy.html"><code>trendy()</code></a> has three main arguments: <code>search_terms</code>, <code>from</code>, and <code>to</code> (in the form of <code>"yyyy-mm-dd"</code>). The first argument is the only mandatory one. Provide a vector of length 5 or less as the first argument. Here we will use the <code>candidates</code> vector and look at data from the past two weeks. I will create two variables for the beginning and end dates. This will be to demonstrate how functions can be used to programatically search date ranges.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="c"># to today</span>
<span class="nv">end</span> <span class="o">&lt;-</span> <span class="nf"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="o">(</span><span class="o">)</span>
<span class="c"># from 2 weeks ago</span>
<span class="nv">begin</span> <span class="o">&lt;-</span> <span class="nf"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="o">(</span><span class="o">)</span> <span class="o">-</span> <span class="m">14</span></code></pre>
</div>
<p>Pass these arguments to <a href="https://rdrr.io/pkg/trendyy/man/trendy.html"><code>trendy()</code></a> and save them to a variable.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">candidate_trends</span> <span class="o">&lt;-</span> <span class="nf"><a href="https://rdrr.io/pkg/trendyy/man/trendy.html">trendy</a></span><span class="o">(</span>search_terms <span class="o">=</span> <span class="nv">candidates</span>, from <span class="o">=</span> <span class="nv">begin</span>, to <span class="o">=</span> <span class="nv">end</span><span class="o">)</span>

<span class="nv">candidate_trends</span>
<span class="c">#&gt; <span style="font-weight: bold;">~Trendy results~</span></span>
<span class="c"><span style="font-weight: bold;">#&gt; </span></span>
<span class="c">#&gt; Search Terms: Joe Biden, Kamala Harris, Beto O'Rourke, Bernie Sanders, Elizabeth Warren</span>
<span class="c">#&gt; </span>
<span class="c">#&gt; (&gt;^.^)&gt; ~~~~~~~~~~~~~~~~~~~~ summary ~~~~~~~~~~~~~~~~~~~~ &lt;(^.^&lt;)</span>
<span class="c">#&gt; <span style="color: #555555;"># A tibble: 5 × 5</span></span>
<span class="c">#&gt;   keyword          max_hits min_hits from       to        </span>
<span class="c">#&gt;   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>    <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;date&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="c">#&gt; <span style="color: #555555;">1</span> Bernie Sanders         12        4 2022-10-31 2022-11-10</span>
<span class="c">#&gt; <span style="color: #555555;">2</span> Beto O'Rourke           6        1 2022-10-31 2022-11-10</span>
<span class="c">#&gt; <span style="color: #555555;">3</span> Elizabeth Warren        3        1 2022-10-31 2022-11-10</span>
<span class="c">#&gt; <span style="color: #555555;">4</span> Joe Biden             100       42 2022-10-31 2022-11-10</span>
<span class="c">#&gt; <span style="color: #555555;">5</span> Kamala Harris          10        5 2022-10-31 2022-11-10</span></code></pre>
</div>
<p>Trendy creates an object of class <code>trendy</code> see <code>class(candidate_trends)</code> trendy. There are a number of accessor functions. We will use <a href="https://rdrr.io/pkg/trendyy/man/get_interest.html"><code>get_interest()</code></a> and <a href="https://rdrr.io/pkg/trendyy/man/get_related_queries.html"><code>get_related_queries()</code></a>. See the documentation of the others.</p>
<p>To access to relative popularity, we will use <code>get_interest(trendy)</code>.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">popularity</span> <span class="o">&lt;-</span> <span class="nf"><a href="https://rdrr.io/pkg/trendyy/man/get_interest.html">get_interest</a></span><span class="o">(</span><span class="nv">candidate_trends</span><span class="o">)</span>

<span class="nv">popularity</span>
<span class="c">#&gt; <span style="color: #555555;"># A tibble: 55 × 7</span></span>
<span class="c">#&gt;    date                 hits keyword   geo   time                  gprop category      </span>
<span class="c">#&gt;    <span style="color: #555555; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="c">#&gt; <span style="color: #555555;"> 1</span> 2022-10-31 <span style="color: #555555;">00:00:00</span>    48 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 2</span> 2022-11-01 <span style="color: #555555;">00:00:00</span>    42 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 3</span> 2022-11-02 <span style="color: #555555;">00:00:00</span>    51 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 4</span> 2022-11-03 <span style="color: #555555;">00:00:00</span>    52 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 5</span> 2022-11-04 <span style="color: #555555;">00:00:00</span>    47 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 6</span> 2022-11-05 <span style="color: #555555;">00:00:00</span>    45 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 7</span> 2022-11-06 <span style="color: #555555;">00:00:00</span>    46 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 8</span> 2022-11-07 <span style="color: #555555;">00:00:00</span>    52 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 9</span> 2022-11-08 <span style="color: #555555;">00:00:00</span>    67 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;">10</span> 2022-11-09 <span style="color: #555555;">00:00:00</span>   100 Joe Biden world 2022-10-31 2022-11-14 web   All categories</span>
<span class="c">#&gt; <span style="color: #555555;"># … with 45 more rows</span></span>
<span class="c">#&gt; <span style="color: #555555;"># ℹ Use `print(n = ...)` to see more rows</span></span></code></pre>
</div>
<p>For related queries we will use <code>get_related_queries(trendy)</code>. Note that you can either pipe the object or pass it directly.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">candidate_trends</span> <span class="o"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="nf"><a href="https://rdrr.io/pkg/trendyy/man/get_related_queries.html">get_related_queries</a></span><span class="o">(</span><span class="o">)</span> <span class="o"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="c"># picking queries for a random candidate</span>
  <span class="nf"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="o">(</span><span class="nv">keyword</span> <span class="o">==</span> <span class="nf"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="o">(</span><span class="nv">candidates</span>, <span class="m">1</span><span class="o">)</span><span class="o">)</span>
<span class="c">#&gt; <span style="color: #555555;"># A tibble: 42 × 5</span></span>
<span class="c">#&gt;    subject related_queries value                    keyword        category      </span>
<span class="c">#&gt;    <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="c">#&gt; <span style="color: #555555;"> 1</span> 100     top             election                 Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 2</span> 68      top             big mouth bernie sanders Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 3</span> 61      top             biden                    Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 4</span> 56      top             election results         Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 5</span> 47      top             bernie sanders meme      Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 6</span> 37      top             bernie sanders party     Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 7</span> 33      top             bernie sanders age       Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 8</span> 33      top             joe biden                Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"> 9</span> 33      top             trump                    Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;">10</span> 30      top             donald trump             Bernie Sanders All categories</span>
<span class="c">#&gt; <span style="color: #555555;"># … with 32 more rows</span></span>
<span class="c">#&gt; <span style="color: #555555;"># ℹ Use `print(n = ...)` to see more rows</span></span></code></pre>
</div>
</section>
<section id="visualizing-trends" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-trends">Visualizing Trends</h2>
<p>I’m guessing your director enjoys charts—so do I. To make the data more accessible, use the <code>popularity</code> tibble to create a time series chart of popularity over the past two weeks. We will use <code>ggplot2</code>. Remember that time should be displayed on the x axis. We want to have a line for each candidate, so map the color aesthetic to the keyword.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="o">(</span><span class="nv">popularity</span>, 
       <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="o">(</span>x <span class="o">=</span> <span class="nv">date</span>, y <span class="o">=</span> <span class="nv">hits</span>, color <span class="o">=</span> <span class="nv">keyword</span><span class="o">)</span><span class="o">)</span> <span class="o">+</span> 
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="o">(</span><span class="o">)</span> <span class="o">+</span>
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="o">(</span>x <span class="o">=</span> <span class="s">""</span>, y <span class="o">=</span> <span class="s">"Search Popularity"</span>, 
       title <span class="o">=</span> <span class="s">"Google popularity of top 5 polling candidates"</span><span class="o">)</span> <span class="o">+</span> 
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="o">(</span><span class="o">)</span> <span class="o">+</span>
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="o">(</span>legend.position <span class="o">=</span> <span class="s">"bottom"</span>, 
        legend.title <span class="o">=</span> <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
</code></pre>
<p><img src="figs/unnamed-chunk-7-1.png" width="700px" style="display: block; margin: auto;"></p>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="josiahparry/quarto-site" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>