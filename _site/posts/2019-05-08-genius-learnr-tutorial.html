<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Josiah Parry">
<meta name="dcterms.date" content="2019-05-08">

<title>Josiah Parry - genius tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-8NVVBLZBVF"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-8NVVBLZBVF', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
<meta name="twitter:title" content="Josiah Parry - genius tutorial">
<meta name="twitter:description" content="You want to start analysing song lyrics, where do you go? There have been music information retrieval papers written on the topic of programmatically extracting lyrics from the web.">
<meta name="twitter:creator" content="@josiahparry">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">genius tutorial</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Josiah Parry</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">home</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">about</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/index.html" class="sidebar-item-text sidebar-link">posts</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects.html" class="sidebar-item-text sidebar-link">projects</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.xml" class="sidebar-item-text sidebar-link">RSS</a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introducing-genius" id="toc-introducing-genius" class="nav-link active" data-scroll-target="#introducing-genius">Introducing genius</a></li>
  <li><a href="#single-song-lyrics" id="toc-single-song-lyrics" class="nav-link" data-scroll-target="#single-song-lyrics">Single song lyrics</a></li>
  <li><a href="#album-lyrics" id="toc-album-lyrics" class="nav-link" data-scroll-target="#album-lyrics">Album Lyrics</a></li>
  <li><a href="#adding-lyrics-to-a-data-frame" id="toc-adding-lyrics-to-a-data-frame" class="nav-link" data-scroll-target="#adding-lyrics-to-a-data-frame">Adding Lyrics to a data frame</a>
  <ul class="collapse">
  <li><a href="#multiple-songs" id="toc-multiple-songs" class="nav-link" data-scroll-target="#multiple-songs">Multiple songs</a></li>
  <li><a href="#multiple-albums" id="toc-multiple-albums" class="nav-link" data-scroll-target="#multiple-albums">Multiple albums</a></li>
  <li><a href="#albums-and-songs" id="toc-albums-and-songs" class="nav-link" data-scroll-target="#albums-and-songs">Albums and Songs</a></li>
  </ul></li>
  <li><a href="#self-similarity" id="toc-self-similarity" class="nav-link" data-scroll-target="#self-similarity">Self-similarity</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">genius tutorial</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Josiah Parry </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 8, 2019</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">knitr</span><span class="nf">::</span><span class="nv"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="o">$</span><span class="nf">set</span><span class="o">(</span>eval <span class="o">=</span> <span class="kc">FALSE</span><span class="o">)</span></code></pre>
</div>
<section id="introducing-genius" class="level2">
<h2 class="anchored" data-anchor-id="introducing-genius">Introducing genius</h2>
<p>You want to start analysing song lyrics, where do you go? There have been music information retrieval papers written on the topic of programmatically extracting lyrics from the web. Dozens of people have gone through the laborious task of scraping song lyrics from websites. Even a recent winner of the Shiny competition scraped lyrics from Genius.com.</p>
<p>I too have been there. Scraping websites is not always the best use of your time. <code>genius</code> is an R package that will enable you to programatically download song lyrics in a tidy format ready for analysis. To begin using the package, it first must be installed, and loaded. In addition to <code>genius</code>, we will need our standard data manipulation tools from the <code>tidyverse</code>.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="o">(</span><span class="s">"genius"</span><span class="o">)</span></code></pre>
</div>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="kr"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="o">(</span><span class="nv"><a href="https://github.com/josiahparry/genius">genius</a></span><span class="o">)</span>
<span class="kr"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="o">(</span><span class="nv"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="o">)</span></code></pre>
</div>
</section>
<section id="single-song-lyrics" class="level2">
<h2 class="anchored" data-anchor-id="single-song-lyrics">Single song lyrics</h2>
<p>The simplest method of extracting song lyrics is to get just a single song at a time. This is done with the <code>genius_lyrics()</code> function. It takes two main arguments: <code>artist</code> and <code>song</code>. These are the quoted name of the artist and song. Additionally there is a third argument <code>info</code> which determines what extra metadata you can get. The possible values are <code>title</code>, <code>simple</code>, <code>artist</code>, <code>features</code>, and <code>all</code>. I recommend trying them all to see how they work.</p>
<p>In this example we will work to retrieve the song lyrics for the upcoming musician <a href="https://rennyconti.bandcamp.com">Renny Conti</a>.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">floating</span> <span class="o">&lt;-</span> <span class="nf">genius_lyrics</span><span class="o">(</span><span class="s">"renny conti"</span>, <span class="s">"people floating"</span><span class="o">)</span>
<span class="nv">floating</span></code></pre>
</div>
</section>
<section id="album-lyrics" class="level2">
<h2 class="anchored" data-anchor-id="album-lyrics">Album Lyrics</h2>
<p>Now that you have the intuition for obtaining lyrics for a single song, we can now create a larger dataset for the lyrics of an entire album using <code>genius_album()</code>. Similar to <code>genius_lyrics()</code>, the arguments are <code>artist</code>, <code>album</code>, and <code>info</code>.</p>
<p>In the exercise below the lyrics for <a href="https://www.snailmail.band/">Snail Mail’s</a> album Lush. Try retrieving the lyrics for an album of your own choosing.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">lush</span> <span class="o">&lt;-</span> <span class="nf">genius_album</span><span class="o">(</span><span class="s">"Snail Mail"</span>, <span class="s">"Lush"</span><span class="o">)</span>
<span class="nv">lush</span></code></pre>
</div>
</section>
<section id="adding-lyrics-to-a-data-frame" class="level2">
<h2 class="anchored" data-anchor-id="adding-lyrics-to-a-data-frame">Adding Lyrics to a data frame</h2>
<section id="multiple-songs" class="level3">
<h3 class="anchored" data-anchor-id="multiple-songs">Multiple songs</h3>
<p>A common use for lyric analysis is to compare the lyrics of one artist to another. In order to do that, you could potentially retrieve the lyrics for multiple songs and albums and then join them together. This has one major issue in my mind, it makes you create multiple object taking up precious memory. For this reason, the function <code>add_genius()</code> was developed. This enables you to create a tibble with a column for an artists name and their album or song title. <code>add_genius()</code> will then go through the entire tibble and add song lyrics for the tracks and albums that are available.</p>
<p>Let’s try this with a tibble of three songs.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">three_songs</span> <span class="o">&lt;-</span> <span class="nf"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="o">(</span>
  <span class="o">~</span> <span class="nv">artist</span>, <span class="o">~</span> <span class="nv">title</span>,
  <span class="s">"Big Thief"</span>, <span class="s">"UFOF"</span>,
  <span class="s">"Andrew Bird"</span>, <span class="s">"Imitosis"</span>,
  <span class="s">"Sylvan Esso"</span>, <span class="s">"Slack Jaw"</span>
<span class="o">)</span>

<span class="nv">song_lyrics</span> <span class="o">&lt;-</span> <span class="nv">three_songs</span> <span class="o"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="nf">add_genius</span><span class="o">(</span><span class="nv">artist</span>, <span class="nv">title</span>, type <span class="o">=</span> <span class="s">"lyrics"</span><span class="o">)</span>

<span class="nv">song_lyrics</span> <span class="o"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="nf"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="o">(</span><span class="nv">artist</span><span class="o">)</span>
</code></pre>
</div>
</section>
<section id="multiple-albums" class="level3">
<h3 class="anchored" data-anchor-id="multiple-albums">Multiple albums</h3>
<p><code>add_genius()</code> also extends this functionality to albums.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">albums</span> <span class="o">&lt;-</span> <span class="nf"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="o">(</span>
  <span class="o">~</span> <span class="nv">artist</span>, <span class="o">~</span> <span class="nv">title</span>,
  <span class="s">"Andrew Bird"</span>, <span class="s">"Armchair Apocrypha"</span>,
  <span class="s">"Andrew Bird"</span>, <span class="s">"Things are really great here sort of"</span>
<span class="o">)</span>

<span class="nv">album_lyrics</span> <span class="o">&lt;-</span> <span class="nv">albums</span> <span class="o"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="nf">add_genius</span><span class="o">(</span><span class="nv">artist</span>, <span class="nv">title</span>, type <span class="o">=</span> <span class="s">"album"</span><span class="o">)</span>

<span class="nv">album_lyrics</span></code></pre>
</div>
<p>What is important to note here is that the warnings for this function are somewhat informative. When a 404 error occurs, this may be because that the song does not exist in Genius. Or, that the song is actually an instrumental which is the case here with Andrew Bird.</p>
</section>
<section id="albums-and-songs" class="level3">
<h3 class="anchored" data-anchor-id="albums-and-songs">Albums and Songs</h3>
<p>In the scenario that you want to mix single songs and lyrics, you can supply a column with the type value of each row. The example below illustrates this. First a tibble with artist, track or album title, and type columns are created. Next, the tibble is piped to <code>add_genius()</code> with the unquote column names for the artist, title, and type columns. This will then iterate over each row and fetch the appropriate song lyrics.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">song_album</span> <span class="o">&lt;-</span> <span class="nf"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="o">(</span>
  <span class="o">~</span> <span class="nv">artist</span>, <span class="o">~</span> <span class="nv">title</span>, <span class="o">~</span> <span class="nv">type</span>,
  <span class="s">"Big Thief"</span>, <span class="s">"UFOF"</span>, <span class="s">"lyrics"</span>,
  <span class="s">"Andrew Bird"</span>, <span class="s">"Imitosis"</span>, <span class="s">"lyrics"</span>,
  <span class="s">"Sylvan Esso"</span>, <span class="s">"Slack Jaw"</span>, <span class="s">"lyrics"</span>,
  <span class="s">"Movements"</span>, <span class="s">"Feel Something"</span>, <span class="s">"album"</span>
<span class="o">)</span>

<span class="nv">mixed_lyrics</span> <span class="o">&lt;-</span> <span class="nv">song_album</span> <span class="o"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="nf">add_genius</span><span class="o">(</span><span class="nv">artist</span>, <span class="nv">title</span>, <span class="nv">type</span><span class="o">)</span></code></pre>
</div>
</section>
</section>
<section id="self-similarity" class="level2">
<h2 class="anchored" data-anchor-id="self-similarity">Self-similarity</h2>
<p>Another feature of <code>genius</code> is the ability to create self-similarity matrices to visualize lyrical patterns within a song. This idea was taken from Colin Morris’ wonderful javascript based <a href="https://colinmorris.github.io/SongSim/#/gallery">Song Sim</a> project. Colin explains the interpretation of a self-similarity matrix in their <a href="https://www.youtube.com/watch?v=_tjFwcmHy5M">TEDx talk</a>. An even better description of the interpretation is available in <a href="https://colinmorris.github.io/blog/weird-pop-songs">this post</a>.</p>
<p>To use Colin’s example we will look at the structure of Ke$ha’s Tik Tok.</p>
<p>The function <code>calc_self_sim()</code> will create a self-similarity matrix of a given song. The main arguments for this function are the tibble (<code>df</code>), and the column containing the lyrics (<code>lyric_col</code>). Ideally this is one line per observation as is default from the output of <code>genius_*()</code>. The tidy output compares every ith word with every word in the song. This measures repetition of words and will show us the structure of the lyrics.</p>
<div class="highlight">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nv">tik_tok</span> <span class="o">&lt;-</span> <span class="nf">genius_lyrics</span><span class="o">(</span><span class="s">"Ke$ha"</span>, <span class="s">"Tik Tok"</span><span class="o">)</span>

<span class="nv">tt_self_sim</span> <span class="o">&lt;-</span> <span class="nf">calc_self_sim</span><span class="o">(</span><span class="nv">tik_tok</span>, <span class="nv">lyric</span>, output <span class="o">=</span> <span class="s">"tidy"</span><span class="o">)</span>

<span class="nv">tt_self_sim</span>

<span class="nv">tt_self_sim</span> <span class="o"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="o">(</span><span class="nf"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="o">(</span>x <span class="o">=</span> <span class="nv">x_id</span>, y <span class="o">=</span> <span class="nv">y_id</span>, fill <span class="o">=</span> <span class="nv">identical</span><span class="o">)</span><span class="o">)</span> <span class="o">+</span>
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="o">(</span><span class="o">)</span> <span class="o">+</span>
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="o">(</span>values <span class="o">=</span> <span class="nf"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="o">(</span><span class="s">"white"</span>, <span class="s">"black"</span><span class="o">)</span><span class="o">)</span> <span class="o">+</span>
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="o">(</span><span class="o">)</span> <span class="o">+</span>
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="o">(</span>legend.position <span class="o">=</span> <span class="s">"none"</span>,
        axis.text <span class="o">=</span> <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="o">(</span><span class="o">)</span><span class="o">)</span> <span class="o">+</span>
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="o">(</span>trans <span class="o">=</span> <span class="s">"reverse"</span><span class="o">)</span> <span class="o">+</span>
  <span class="nf"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="o">(</span>title <span class="o">=</span> <span class="s">"Tik Tok"</span>, subtitle <span class="o">=</span> <span class="s">"Self-similarity matrix"</span>, x <span class="o">=</span> <span class="s">""</span>, y <span class="o">=</span> <span class="s">""</span>, 
       caption <span class="o">=</span> <span class="s">"The matrix displays that there are three choruses with a bridge between the last two. The bridge displays internal repetition."</span><span class="o">)</span></code></pre>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="josiahparry/quarto-site" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>