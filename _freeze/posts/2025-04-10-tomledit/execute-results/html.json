{
  "hash": "f898fa2a241254b7528acb58a1c03542",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Create and edit TOML in R with {tomledit}\"\ndate: 2025-04-10\nauthor: Josiah Parry\ncategories: [r,  toml, rust, extendr]\n---\n\n\n\n\n[`{tomledit}`](https://extendr.github.io/tomledit/) v0.1.1 has found its way onto [CRAN](https://cran.r-project.org/web/packages/tomledit/index.html). \n\n\n`{tomledit}` is a package for _creating_ and _editing_ TOML files from R with support for reading as well. \n\n\nThe most basic use of `tomledit` is via `toml()`.  `toml()` creates a `Toml` object from named arguments passed to `...`. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tomledit)\n\ntoml(person = list(age = 30L, name = \"Wilma\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<Toml>\n[person]\nage = 30\nname = \"Wilma\"\n```\n\n\n:::\n:::\n\n\n\n\n\n## v0.1.1 Features\n\nThis newest release supports the use of arrays with inline tables. This feature comes as a request from [@dpastoor](https://github.com/dpastoor) to support the experimental `rproject.toml` file for [`rv`](https://github.com/A2-ai/rv).\n\n:::{.aside}\nI'm bullish on `rv` as a new alternative to `{renv}`. I think it will be a great addition to the R community.\n:::\n\nThis new feature allows us to have a list of unnamed lists inside of our TOML. \n\nBelow we create an item called `repositories` which is an array of inline tables containing the alias and url to a CRAN-like repository. \n\nSimilarly, the `dependencies` item is an array of _both_ inline-tables and strings. This new feature adds more flexibility to the type of TOML that we can create. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nr_proj_toml <- list(\n  name = \"upgrade\", \n  r_version = \"4.4\",\n  repositories = list(\n    list(alias = \"gh-pkg-mirror\", url = \"https://a2-ai.github.io/gh-pkg-mirror/2024-02-22\"),\n    list(alias = \"RSPM\", url = \"https://packagemanager.posit.co/cran/2024-02-22\"),\n    list(alias = \"new-mirror\", url = \"https://a2-ai.github.io/gh-pkg-mirror/2024-12-04\"),\n    list(alias = \"new-rspm\", url = \"https://packagemanager.posit.co/cran/2024-12-04\")\n  ),\n  dependencies = list(\n    list(name = \"pmplots\", repository = \"new-mirror\"),\n    \"pmtables\",\n    \"bbr\",\n    list(name = \"ggplot2\", repository = \"new-rspm\")\n  )\n) \n\nas_toml(list(project = r_proj_toml))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<Toml>\n[project]\nname = \"upgrade\"\nr_version = \"4.4\"\nrepositories = [\n    { alias = \"gh-pkg-mirror\", url = \"https://a2-ai.github.io/gh-pkg-mirror/2024-02-22\" },\n    { alias = \"RSPM\", url = \"https://packagemanager.posit.co/cran/2024-02-22\" },\n    { alias = \"new-mirror\", url = \"https://a2-ai.github.io/gh-pkg-mirror/2024-12-04\" },\n    { alias = \"new-rspm\", url = \"https://packagemanager.posit.co/cran/2024-12-04\" }\n]\ndependencies = [\n    { name = \"pmplots\", repository = \"new-mirror\" },\n    \"pmtables\",\n    \"bbr\",\n    { name = \"ggplot2\", repository = \"new-rspm\" }\n]\n```\n\n\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}